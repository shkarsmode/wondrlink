<h1>Users Database</h1>

<div class="card">
	<div class="title">
		<div>Last users</div>
		<div>
			<mat-form-field 
				matTooltip="Choice will be remembered"
				matTooltipShowDelay="400"
				matTooltipPosition="above">
				<mat-label>Sorty by</mat-label>
				<mat-select
					(selectionChange)="onSelectionChange()" 
					[(value)]="sortBy">
					<mat-option value="all">All</mat-option>
					<mat-option 
						[value]="userTypeEnum.Patient">
						Patients
					</mat-option>
					<mat-option 
						[value]="userTypeEnum.Industry">
						Industries
					</mat-option>
					<mat-option 
						[value]="userTypeEnum.Physician">
						Physicians
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
	</div>
	<div class="content">
		<table *ngIf="users">
			<tr>
				<th>â„–</th>
				<th>User name</th>
				<th>Email</th>
				<th>Type</th>
				<th>Role</th>
				<th>Status</th>
				<th>Actions</th>
			</tr>
			<tr *ngFor="let user of users; index as i">
				<td>
					{{ i + 1 }}
				</td>
				<td class="user-name">
					{{ user.firstName }} {{ user.lastName }}
				</td>
				<td class="email">
					{{ user.email }}
				</td>
				<td class="type">
					{{ user.type ? user.type : 'Common' }}
				</td>
				<td class="role">
					{{ user.role }}
				</td>
				<td>
					{{ user.status }}
				</td>
				<td class="wrap-buttons">
					<button mat-stroked-button routerLink="/admin/edit-user/{{ user.id }}">
						Edit
					</button>
					<button 
						(mousedown)="startDeleteTimeout(user.id!)"
						(mouseup)="clearDeleteTimeout()"
						(mouseout)="clearDeleteTimeout()"
						[ngClass]="{'deleting': isDeleting && activeDeletingIndex === user.id!}"
						mat-fab color="warn" 
						matTooltip="Press to delete"
						matTooltipShowDelay="300">
						<span class="material-symbols-outlined">
							delete
						</span>
					</button>
				</td>
			</tr>
		</table>
	</div>
</div>

<div class="wrap-button-more">
	<button 
		mat-raised-button 
		(click)="onButtonMoreClick()" 
		*ngIf="pagesCount !== page + 1 && users.length">
		Show more
	</button>
</div>
